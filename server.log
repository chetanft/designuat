
> figma-web-comparison-tool@1.0.0 start
> node start-server.js

🚀 Starting Modern UI server (RECOMMENDED)...
📁 File: server-unified.js
🌐 Port: 3006
🔗 URL: http://localhost:3006

🔧 MCP Framelink Bridge initialized
🌐 MCP Framelink global proxies setup
✅ Configuration loaded
🔧 MCP Direct Figma Extractor initialized
✅ MCP Direct Figma Extractor initialized
🔧 Initializing components...
🎨 Initializing Figma extractor...
🔧 Initializing Figma MCP Integration...
🔧 Third-party MCP tools enabled - checking availability
🔧 MCP Framelink Bridge initialized
✅ MCP tools initialized successfully (third-party)
✅ Figma Extractor initialized successfully
✅ Figma extractor initialized
🌐 Initializing basic web extractor...
🔍 Checking browser environment...
📊 Current browser processes: 29
🧹 Cleaning up orphaned processes...
🧹 Cleaning up orphaned browser processes...
✅ Orphaned processes cleaned up
🚀 Launching browser with enhanced stability...
🚀 Launching browser (attempt 1/3)...
❌ Browser launch attempt 1 failed: socket hang up
🧹 Cleaning up and retrying...
🧹 Cleaning up orphaned browser processes...
✅ Orphaned processes cleaned up
🚀 Launching browser (attempt 2/3)...
❌ Browser launch attempt 2 failed: socket hang up
🧹 Cleaning up and retrying...
🧹 Cleaning up orphaned browser processes...
✅ Orphaned processes cleaned up
🚀 Launching browser (attempt 3/3)...
❌ Browser launch attempt 3 failed: socket hang up
❌ Failed to initialize WebExtractor: Error: Failed to launch browser after 3 attempts
    at BrowserManager.createBrowser (file:///Users/user/Comparision%20tool/src/utils/browserManager.js:111:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async WebExtractor.initialize (file:///Users/user/Comparision%20tool/src/scraper/webExtractor.js:139:22)
    at async initializeComponents (file:///Users/user/Comparision%20tool/server-unified.js:230:7)
    at async startServer (file:///Users/user/Comparision%20tool/server-unified.js:998:5)
⚠️ Basic web extractor failed to initialize, server will continue without it: WebExtractor initialization failed: Failed to launch browser after 3 attempts
🚀 Initializing enhanced web extractor...
🔍 Checking browser environment...
📊 Current browser processes: 34
🧹 Cleaning up orphaned processes...
🧹 Cleaning up orphaned browser processes...
✅ Orphaned processes cleaned up
🚀 Launching Enhanced Web Extractor...
🚀 Launching browser (attempt 1/3)...
❌ Browser launch attempt 1 failed: socket hang up
🧹 Cleaning up and retrying...
🧹 Cleaning up orphaned browser processes...
✅ Orphaned processes cleaned up
🚀 Launching browser (attempt 2/3)...
❌ Browser launch attempt 2 failed: socket hang up
🧹 Cleaning up and retrying...
🧹 Cleaning up orphaned browser processes...
✅ Orphaned processes cleaned up
🚀 Launching browser (attempt 3/3)...
❌ Browser launch attempt 3 failed: socket hang up
❌ Failed to initialize Enhanced Web Extractor: Error: Failed to launch browser after 3 attempts
    at BrowserManager.createBrowser (file:///Users/user/Comparision%20tool/src/utils/browserManager.js:111:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async EnhancedWebExtractor.initialize (file:///Users/user/Comparision%20tool/src/scraper/enhancedWebExtractor.js:58:22)
    at async initializeComponents (file:///Users/user/Comparision%20tool/server-unified.js:243:9)
    at async startServer (file:///Users/user/Comparision%20tool/server-unified.js:998:5)
⚠️ Enhanced web extractor initialization attempt 1 failed: Failed to launch browser after 3 attempts
🔄 Retrying enhanced web extractor initialization...
🔍 Checking browser environment...
📊 Current browser processes: 29
🧹 Cleaning up orphaned processes...
🧹 Cleaning up orphaned browser processes...
✅ Orphaned processes cleaned up
🚀 Launching Enhanced Web Extractor...
🚀 Launching browser (attempt 1/3)...
❌ Browser launch attempt 1 failed: socket hang up
🧹 Cleaning up and retrying...
🧹 Cleaning up orphaned browser processes...
✅ Orphaned processes cleaned up
🚀 Launching browser (attempt 2/3)...
❌ Browser launch attempt 2 failed: socket hang up
🧹 Cleaning up and retrying...
🧹 Cleaning up orphaned browser processes...
✅ Orphaned processes cleaned up
🚀 Launching browser (attempt 3/3)...
❌ Browser launch attempt 3 failed: socket hang up
❌ Failed to initialize Enhanced Web Extractor: Error: Failed to launch browser after 3 attempts
    at BrowserManager.createBrowser (file:///Users/user/Comparision%20tool/src/utils/browserManager.js:111:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async EnhancedWebExtractor.initialize (file:///Users/user/Comparision%20tool/src/scraper/enhancedWebExtractor.js:58:22)
    at async initializeComponents (file:///Users/user/Comparision%20tool/server-unified.js:243:9)
    at async startServer (file:///Users/user/Comparision%20tool/server-unified.js:998:5)
⚠️ Enhanced web extractor initialization attempt 2 failed: Failed to launch browser after 3 attempts
🔄 Retrying enhanced web extractor initialization...
🔍 Checking browser environment...
📊 Current browser processes: 29
🧹 Cleaning up orphaned processes...
🧹 Cleaning up orphaned browser processes...
✅ Orphaned processes cleaned up
🚀 Launching Enhanced Web Extractor...
🚀 Launching browser (attempt 1/3)...
❌ Browser launch attempt 1 failed: socket hang up
🧹 Cleaning up and retrying...
🧹 Cleaning up orphaned browser processes...
✅ Orphaned processes cleaned up
🚀 Launching browser (attempt 2/3)...
❌ Browser launch attempt 2 failed: socket hang up
🧹 Cleaning up and retrying...
🧹 Cleaning up orphaned browser processes...
✅ Orphaned processes cleaned up
🚀 Launching browser (attempt 3/3)...
❌ Browser launch attempt 3 failed: socket hang up
❌ Failed to initialize Enhanced Web Extractor: Error: Failed to launch browser after 3 attempts
    at BrowserManager.createBrowser (file:///Users/user/Comparision%20tool/src/utils/browserManager.js:111:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async EnhancedWebExtractor.initialize (file:///Users/user/Comparision%20tool/src/scraper/enhancedWebExtractor.js:58:22)
    at async initializeComponents (file:///Users/user/Comparision%20tool/server-unified.js:243:9)
    at async startServer (file:///Users/user/Comparision%20tool/server-unified.js:998:5)
⚠️ Enhanced web extractor initialization attempt 3 failed: Failed to launch browser after 3 attempts
⚠️ Enhanced web extractor failed to initialize after 3 attempts, server will continue without it
🏗️ Server components initialized (some may be in fallback mode)
🧪 Testing MCP Framelink connection...
🧪 Testing MCP Framelink connection...
✅ MCP Framelink tools are available
✅ MCP Framelink connection verified
✅ All components initialized successfully
❌ Uncaught Exception: Error: listen EADDRINUSE: address already in use :::3006
    at Server.setupListenHandle [as _listen2] (node:net:1939:16)
    at listenInCluster (node:net:1996:12)
    at Server.listen (node:net:2101:7)
    at startServer (file:///Users/user/Comparision%20tool/server-unified.js:1001:12) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '::',
  port: 3006
}

🛑 Received uncaughtException, shutting down gracefully...
🧹 Cleaning up extractors...
✅ HTTP server closed
✅ Web extractor closed
🔄 Closing Enhanced Web Extractor...
✅ Enhanced Web Extractor closed successfully
✅ Enhanced web extractor closed
🧹 Force cleaning up Enhanced Web Extractor resources...
✅ Force cleanup completed
✅ Enhanced web extractor force cleanup completed
✅ Graceful shutdown completed
